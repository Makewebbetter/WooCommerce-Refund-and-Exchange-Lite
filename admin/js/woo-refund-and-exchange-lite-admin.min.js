jQuery(document).ready((function(){jQuery("#wrael-datatable").DataTable({stateSave:!0,dom:'<"wps-dt-buttons"fB>tr<"bottom"lip>',ordering:!0,buttons:["copyHtml5","excelHtml5","csvHtml5"],language:{lengthMenu:"Rows per page _MENU_",paginate:{next:'<svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.99984 0L0.589844 1.41L5.16984 6L0.589844 10.59L1.99984 12L7.99984 6L1.99984 0Z" fill="#8E908F"/></svg>',previous:'<svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.00016 12L7.41016 10.59L2.83016 6L7.41016 1.41L6.00016 -1.23266e-07L0.000156927 6L6.00016 12Z" fill="#8E908F"/></svg>'}}})})),jQuery(document).ready((function(){$=jQuery,jQuery("#order_refunds").length&&jQuery("#order_refunds").find(".refund").each((function(){var e={action:"wps_rma_refund_info",refund_id:jQuery(this).data("order_refund_id"),order_id:jQuery("#post_ID").val(),security_check:wrael_admin_param.wps_rma_nonce},r=jQuery(this);jQuery.ajax({url:wrael_admin_param.ajaxurl,type:"POST",data:e,success:function(e){e&&r.hide()}})}));const e=mdc.textField.MDCTextField,r=([].map.call(document.querySelectorAll(".mdc-text-field"),(function(r){return new e(r)})),mdc.ripple.MDCRipple),a=([].map.call(document.querySelectorAll(".mdc-button"),(function(e){return new r(e)})),mdc.switchControl.MDCSwitch);[].map.call(document.querySelectorAll(".mdc-switch"),(function(e){return new a(e)}));$(document).find(".wps-defaut-multiselect").length>0&&$(document).find(".wps-defaut-multiselect").select2(),$("a[href='admin.php?page=woo_refund_and_exchange_lite_menu']").addClass("submenu-font-size-fix"),$(".wps-password-hidden").click((function(){"text"==$(".wps-form__password").attr("type")?$(".wps-form__password").attr("type","password"):$(".wps-form__password").attr("type","text")})),$(".wps_rma_order_statues").select2();var t=[];function i(){let e=[];$.each($(".add_more_rma_policies"),(function(){var r=$(this).children(".wps_rma_on_functionality").val(),a=$(this).children(".wps_rma_settings").val(),t=new Object;t.name=r,t.value=a,e.push(t)})),e.forEach((function(e){var r=t.filter((function(r,a){return r.name==e.name}));if(r.length){var a=t.indexOf(r[0]);t[a].value=t[a].value.concat(e.value)}else"string"==typeof e.value&&(e.value=[e.value]),t.push(e)}))}function s(){$.each($(".wps_rma_settings"),(function(){""==$(this).val()?($(this).parent(".add_more_rma_policies").children(".wps_rma_max_number_days").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions1").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions2").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_tax_handling").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").next().hide()):"wps_rma_maximum_days"==$(this).val()?($(this).parent(".add_more_rma_policies").children(".wps_rma_max_number_days").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions1").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions2").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_tax_handling").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").next().hide()):"wps_rma_order_status"==$(this).val()?($(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").next().show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_tax_handling").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions1").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions2").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_max_number_days").hide()):"wps_rma_tax_handling"==$(this).val()&&($(this).parent(".add_more_rma_policies").children(".wps_rma_tax_handling").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").next().hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_max_number_days").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions1").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions_label").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_settings_label").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions2").show())}))}function _(e,r,a){return e.replace(new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),a)}i(),s(),$(document).on("change",".wps_rma_settings, .wps_rma_on_functionality",(function(){var e=$(this).parent(".add_more_rma_policies").children(".wps_rma_on_functionality").val(),r=$(this).parent(".add_more_rma_policies").children(".wps_rma_settings").val(),a=$(this);""!=r&&null!=r&&t.forEach((function(t){e==t.name&&null!=t.value&&-1!=$.inArray(r,t.value)&&(alert(wrael_admin_param.wps_policy_already_exist),a.parent(".add_more_rma_policies").remove())})),""==a.val()?($(this).parent(".add_more_rma_policies").children(".wps_rma_max_number_days").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions1").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions2").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_tax_handling").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").next().hide()):"wps_rma_maximum_days"==a.val()?($(this).parent(".add_more_rma_policies").children(".wps_rma_max_number_days").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions1").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions2").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_tax_handling").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").next().hide()):"wps_rma_order_status"==a.val()?($(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").next().show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_tax_handling").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions1").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions2").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_max_number_days").hide()):"wps_rma_tax_handling"==a.val()&&($(this).parent(".add_more_rma_policies").children(".wps_rma_tax_handling").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_order_statues").next().hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_max_number_days").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions1").hide(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions2").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_conditions_label").show(),$(this).parent(".add_more_rma_policies").children(".wps_rma_settings_label").show()),t=[],i()})),$(document).on("submit","#save_policies_setting_form",(function(e){$.each($(".wps_rma_settings"),(function(){""==$(this).val()&&$(this).parent(".add_more_rma_policies").remove()}))})),$(document).on("click","#wps_rma_add_more",(function(){var e=wrael_admin_param.check_pro_active,r=$(".add_more_rma_policies").last().children(".wps_rma_get_current_i").val();r=parseInt(r)+1;var a=$("#add_more_rma_policies_clone").html();a=_(a,"wps_rma_setting[1]","wps_rma_setting["+r+"]"),a=_(a,"wps_rma_order_statues1","wps_rma_order_statues"),e&&(a=show_correct_field_pro(a)),$("#div_add_more_rma_policies").append('<div class="add_more_rma_policies">'+a+'<input type="button" value="X" class="rma_policy_delete"></div>'),$(".add_more_rma_policies").last().children(".wps_rma_get_current_i").val(r),$(".wps_rma_order_statues").select2(),e&&wps_rma_do_something(),s(),i()})),$(document).on("click",".rma_policy_delete",(function(){$(this).parent(".add_more_rma_policies").remove(),s(),i()})),$(".wps_rma_return_loader").hide(),$(document).on("click","#wps_rma_accept_return",(function(){$("#wps_rma_return_package").hide(),$(".wps_rma_return_loader").show();var e={action:"wps_rma_return_req_approve",orderid:$(this).data("orderid"),date:$(this).data("date"),security_check:wrael_admin_param.wps_rma_nonce};$.ajax({url:wrael_admin_param.ajaxurl,type:"POST",data:e,dataType:"json",success:function(e){$(".wps_rma_return_loader").hide(),$(".refund-actions .cancel-action").hide(),window.location.reload()}})})),$(document).on("click","#wps_rma_cancel_return",(function(){$(".wps_rma_return_loader").show();var e={action:"wps_rma_return_req_cancel",orderid:$(this).data("orderid"),date:$(this).data("date"),security_check:wrael_admin_param.wps_rma_nonce};$.ajax({url:wrael_admin_param.ajaxurl,type:"POST",data:e,dataType:"json",success:function(e){$(".wps_rma_return_loader").hide(),window.location.reload()}})})),$(document).on("click","#wps_rma_left_amount",(function(){$(this).attr("disabled","disabled");var e=$(this).data("orderid"),r=$(this).data("refund_method"),a=$(".wps_rma_total_amount_for_refund").val();$(".wps_rma_return_loader").show();var t={action:"wps_rma_refund_amount",order_id:e,refund_method:r,refund_amount:a,security_check:wrael_admin_param.wps_rma_nonce};$.ajax({url:wrael_admin_param.ajaxurl,type:"POST",data:t,dataType:"json",success:function(e){if($(".wps_rma_return_loader").show(),""==e.refund_method||"manual_method"==e.refund_method){$("html, body").animate({scrollTop:$("#order_shipping_line_items").offset().top},2e3),$("div.wc-order-refund-items").slideDown(),$("div.wc-order-data-row-toggle").not("div.wc-order-refund-items").slideUp(),$("div.wc-order-totals-items").slideUp();var r=$("#wps_rma_refund_reason").val();$("#refund_amount").val(a),$("#refund_reason").val(r);var t=accounting.unformat(a,woocommerce_admin.mon_decimal_point);$("button .wc-order-refund-amount .amount").text(accounting.formatMoney(t,{symbol:woocommerce_admin_meta_boxes.currency_format_symbol,decimal:woocommerce_admin_meta_boxes.currency_format_decimal_sep,thousand:woocommerce_admin_meta_boxes.currency_format_thousand_sep,precision:woocommerce_admin_meta_boxes.currency_format_num_decimals,format:woocommerce_admin_meta_boxes.currency_format}))}else window.location.reload()}})})),$(document).on("click","#wps_rma_stock_back",(function(){$(this).attr("disabled","disabled");var e={action:"wps_rma_manage_stock",order_id:$(this).data("orderid"),type:$(this).data("type"),security_check:wrael_admin_param.wps_rma_nonce};$.ajax({url:wrael_admin_param.ajaxurl,type:"POST",data:e,dataType:"json",success:function(e){$(this).removeAttr("disabled"),e.result?($("#post").prepend('<div class="updated notice notice-success is-dismissible" id="message"><p>'+e.msg+'</p><button class="notice-dismiss" type="button"><span class="screen-reader-text">Dismiss this notice.</span></button></div>'),$("html, body").animate({scrollTop:$("body").offset().top},2e3,"linear",(function(){window.setTimeout((function(){window.location.reload()}),1e3)}))):($("#post").prepend('<div id="messege" class="notice notice-error is-dismissible" id="message"><p>'+e.msg+'</p><button class="notice-dismiss" type="button"><span class="screen-reader-text">Dismiss this notice.</span></button></div>'),$("html, body").animate({scrollTop:jQuer$("body").offset().top},2e3,"linear",(function(){})))}})})),$(document).on("click","#wps_rma_generate_key_setting",(function(e){e.preventDefault();var r={action:"wps_rma_api_secret_key",security_check:wrael_admin_param.wps_rma_nonce};$.ajax({url:wrael_admin_param.ajaxurl,type:"POST",data:r,dataType:"json",success:function(e){window.location.reload()}})}))})),jQuery(document).ready((function(e){const r=wrael_admin_param.ajaxurl,a=wrael_admin_param.wps_rma_nonce,t=wrael_admin_param.wps_rma_callback,i=wrael_admin_param.wps_rma_pending_orders,s=wrael_admin_param.wps_rma_pending_orders_count,_=wrael_admin_param.wps_rma_pending_users,n=wrael_admin_param.wps_rma_pending_users_count,o=wrael_admin_param.wps_rma_pending_order_msgs,d=wrael_admin_param.wps_rma_pending_order_msgs_count;jQuery(document).on("click","#wps_rma_migration_start-button",(function(e){e.preventDefault(),Swal.fire({icon:"warning",title:"We Have got "+s+" Orders Data,<br/> "+d+" Order Messages Data And "+n+" Users Data",text:"Click to start Migration",footer:"Please do not reload/close this page until prompted",showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,confirmButtonText:'<i class="fa fa-thumbs-up"></i> Start',confirmButtonAriaLabel:"Thumbs up",cancelButtonText:'<i class="fa fa-thumbs-down"> Cancel</i>',cancelButtonAriaLabel:"Thumbs down"}).then((e=>{e.isConfirmed?(Swal.fire({title:"Orders Data are being migrated!",html:"Do not reload/close this tab.",footer:'<span class="order-progress-report">'+s+" are left to migrate",didOpen:()=>{Swal.showLoading()}}),m(i)):e.isDismissed&&Swal.fire("Migration Stopped","","info")}))}));const m=e=>{var i={action:t,event:"wps_rma_import_single_order",nonce:a,orders:e};jQuery.post(r,i).done((function(r){e=JSON.parse(r)})).then((function(e){e=JSON.parse(e).orders,jQuery.isEmptyObject(e)?count=0:count=Object.keys(e).length,jQuery(".order-progress-report").text(count+" are left to migrate"),jQuery.isEmptyObject(e)?(Swal.fire({title:"Order Messages Data are being migrated!",html:"Do not reload/close this tab.",footer:'<span class="order-progress-report">'+d+" are left to migrate",didOpen:()=>{Swal.showLoading()}}),c(o)):m(e)}),(function(e){console.error(e)}))},c=e=>{var i={action:t,event:"wps_rma_import_single_order_msg",nonce:a,order_msgs:e};jQuery.post(r,i).done((function(r){e=JSON.parse(r)})).then((function(e){e=JSON.parse(e).order_msgs,jQuery.isEmptyObject(e)?count=0:count=Object.keys(e).length,jQuery(".order-progress-report").text(count+" are left to migrate"),jQuery.isEmptyObject(e)?(Swal.fire({title:"Users Data are being migrated!",html:"Do not reload/close this tab.",footer:'<span class="order-progress-report">'+n+" are left to migrate",didOpen:()=>{Swal.showLoading()}}),l(_)):c(e)}),(function(e){console.error(e)}))},l=e=>{var i={action:t,event:"wps_rma_import_single_user",nonce:a,users:e};jQuery.post(r,i).done((function(r){e=JSON.parse(r)})).then((function(e){e=JSON.parse(e).users,jQuery.isEmptyObject(e)?count=0:count=Object.keys(e).length,jQuery(".order-progress-report").text(count+" are left to migrate"),jQuery.isEmptyObject(e)?Swal.fire({title:"All of the Data are Migrated successfully!"}):l(e)}),(function(e){console.error(e)}))}}));